@import "functions";
@import "../components/brush/brush-rules";
@import "../components/control-panel/control-panel-rules";
@import "../components/legend/legend-rules";
@import "../components/legend-panel/legend-panel-rules";
@import "../components/message/message-rules";
@import "../components/timeline/timeline-rules";
@import "../components/tooltip/tooltip-rules";
@import "../components/composite-y/composite-y-rules";
@import "../components/composite-y/area-chart-rules";
@import "../components/composite-y/bar-chart-rules";
@import "../components/composite-y/line-chart-rules";
@import "../components/composite-y/scatter-plot-rules";
@import "../components/pie-chart/pie-chart-rules";
@import "../components/radial/radial-dendrogram-rules";

@mixin applyRuleTemplate($componentId, $arg) {
  @if ($componentId == null) {
    @error "applyRuleTemplate mixin only works with a component id";
  } @else {
    @if ($componentId == $brushId) {
      @include brushRules(nth($arg, 1), nth($arg, 2));
    } @else if ($componentId == $controlPanelId) {
      @include controlPanelRules(nth($arg, 1), nth($arg, 2), nth($arg, 3));
    } @else if ($componentId == $crosshairId) {
      @include crosshairRules(nth($arg, 1));
    } @else if ($componentId == $legendId) {
      @include legendRules(nth($arg, 1));
    } @else if ($componentId == $legendPanelId) {
      @include legendPanelRules(
        nth($arg, 1),
        nth($arg, 2),
        nth($arg, 3),
        nth($arg, 4),
        nth($arg, 5),
        nth($arg, 6),
        nth($arg, 7),
        nth($arg, 8));
    } @else if ($componentId == $messageId) {
      @include messageRules(nth($arg, 1), nth($arg, 2), nth($arg, 3));
    } @else if ($componentId == $timelineBarId) {
      @include timelineBarRules(nth($arg, 1));
    } @else if ($componentId == $tooltipId) {
      @include tooltipRules(nth($arg, 1), nth($arg, 2), nth($arg, 3));
    } @else if ($componentId == $compositeYId) {
      @include compositeYChartRules(nth($arg, 1));
    } @else if ($componentId == $areaChartId) {
      @include areaChartRules(nth($arg, 1));
    } @else if ($componentId == $barChartId) {
      @include barChartRules(nth($arg, 1));
    } @else if ($componentId == $lineChartId) {
      @include lineChartRules(nth($arg, 1));
    } @else if ($componentId == $scatterBubbleChartId) {
      @include scatterBubbleChartRules(nth($arg, 1));
    } @else if ($componentId == $pieChartId) {
      @include pieChartRules(nth($arg, 1));
    } @else if ($componentId == $dendrogramId) {
      @include dendrogramRules(nth($arg, 1));
    } @else {
      @warn "Unknown componentId, #{$componentId}, doesn't have an associated mixin.";
    }
  }
}

@mixin themify($componentId, $themeset: ()) {
  @each $theme, $config in $themeset {
    $componentConfig: map-get($config, $componentId);

    @if ($componentConfig != null) {
      .#{$theme} & {
        $arg: getConfigs($componentId, $componentConfig);
        @include applyRuleTemplate($componentId, $arg);
      }
    }
  }
}
